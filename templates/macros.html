{% macro render_form(form, endpoint, form_class, field_class=None, object=None) %}
    {% if not object %}
        {% set url_endpoint = url_for(endpoint) %}
    {% else %}
        {% set url_endpoint = url_for('edit', slug=object.slug) %}
    {% endif %}
    <form action="{{ url_endpoint }}" method="post" class="{{ form_class }} form_layout">
        {{ form.csrf_token }}
        {% if not object %}
            {% for field in form %}
                {{ check_field_errors(field) }}
                {{ render_field(field, field_class) }}
            {% endfor %}
        {% else %}
            {% for field in form %}
                {{ check_field_errors(field) }}
                {{ render_field(field, field_class, object) }}
            {% endfor %}
        {% endif %}
    </form>
{% endmacro %}


<!-- {% macro edit_journal_entry(form, form_class, update=True) %}
    <form action="{{ url_for('edit', slug=object.slug) }}" method="post" class="{{ form_class }} form_layout">
        {{ form.csrf_token }}
        {% for field in form %}
            {{ check_field_errors(field) }}
            {{ render_field(field, object, field_class) }}
        {% endfor %}
    </form>
{% endmacro %} -->


{% macro check_field_errors(field) %}
    {% if field.errors %}
        {% for field_error in field.errors %}
            {{ field_error }}
        {% endfor %}
    {% endif %}
{% endmacro %}


{% macro render_field(field, field_class=None, object=None) %}
    {% if field.id != 'csrf_token' %}
        {{ check_field_errors(field) }}
        {% if not object %}
            {% if field.type == "FieldList" %}
                <div class="form_tag_div">
                {% for input in field %}
                    {% for _ in input %}
                        {{ _(placeholder=_.label.text) }} 
                    {% endfor %}
                {% endfor %}
                </div>
            {% elif field.type != "TextAreaField" %}
                {{ field(class=field_class, placeholder=field.label.text) }}   
            {% else %}
               {{ field(class=field_class, placeholder=field.label.text) }}    
            {% endif %}  
        {% else %}
            {% set input_field = field.name %}
            {% if field.type == "FieldList" %}
                <div class="form_tag_div">
                {% for input in field %}
                    {% for field in input %}
                        {{ field(value=object|attr(input_field)) }} 
                    {% endfor %}
                {% endfor %}
                </div>
            {% elif field.type == "SubmitField" %}
                {{ field(placeholder=field.label.text) }}
            {% elif field.type != "TextAreaField" %}
                {{ field(class=field_class, value=object|attr(input_field)) }}   
            {% else %}
                <textarea class="{{field_class}}">{{object|attr(input_field)}}</textarea>    
            {% endif %}  
        {% endif %}
    {% endif %}
{% endmacro %}

